function E(t){const e=new DOMParser().parseFromString(t,"text/xml"),s=e.querySelector("parsererror");if(s)throw new Error(`GEXF parsing error: ${s.textContent}`);const r=e.querySelector("graph");if(!r)throw new Error("No graph element found in GEXF file");const n=b(r,"node"),i=b(r,"edge"),a=w(r,n),u=_(r,i),g=S(a,u);return{nodes:a,edges:u,attributes:{node:n,edge:i},timeRange:g}}function k(t){const{timeRange:o}=t,e=[];for(let s=o.start;s<=o.end;s++){const r={nodes:[],edges:[],timestamp:s};t.nodes.forEach(n=>{h(n.spells,s)&&r.nodes.push(x(n))}),t.edges.forEach(n=>{h(n.spells,s)&&r.edges.push(v(n))}),e.push(r)}return e}async function I(t){try{const o=await fetch(t);if(!o.ok)throw new Error(`Failed to fetch GEXF file: ${o.statusText}`);const e=await o.text();return E(e)}catch(o){throw new Error(`Error loading GEXF file: ${o instanceof Error?o.message:"Unknown error"}`)}}function b(t,o){const e={},s=t.querySelector(`attributes[class="${o}"]`);return s&&s.querySelectorAll("attribute").forEach(n=>{const i=n.getAttribute("id"),a=n.getAttribute("title"),u=n.getAttribute("type");i&&a&&u&&(e[i]={id:i,title:a,type:u})}),e}function w(t,o){const e=[];return t.querySelectorAll("node").forEach(r=>{const n=r.getAttribute("id"),i=r.getAttribute("label")||n||"";if(!n)return;const a={};r.querySelectorAll("attvalue").forEach(l=>{const f=l.getAttribute("for"),c=l.getAttribute("value");if(f&&c!==null){const d=o[f];d&&(a[d.title]=A(c,d.type))}});const g=[];r.querySelectorAll("spell").forEach(l=>{const f=parseInt(l.getAttribute("start")||"0"),c=parseInt(l.getAttribute("end")||"0");g.push({start:f,end:c})}),e.push({id:n,label:i,attributes:a,spells:g})}),e}function _(t,o){const e=[];return t.querySelectorAll("edge").forEach(r=>{const n=r.getAttribute("id"),i=r.getAttribute("source"),a=r.getAttribute("target"),u=parseFloat(r.getAttribute("weight")||"1");if(!n||!i||!a)return;const g={};r.querySelectorAll("attvalue").forEach(c=>{const d=c.getAttribute("for"),p=c.getAttribute("value");if(d&&p!==null){const m=o[d];m&&(g[m.title]=A(p,m.type))}});const l=[];r.querySelectorAll("spell").forEach(c=>{const d=parseInt(c.getAttribute("start")||"0"),p=parseInt(c.getAttribute("end")||"0");l.push({start:d,end:p})}),e.push({id:n,source:i,target:a,weight:u,attributes:g,spells:l})}),e}function A(t,o){switch(o){case"integer":return parseInt(t,10);case"double":case"float":return parseFloat(t);case"boolean":return t.toLowerCase()==="true";default:return t}}function S(t,o){let e=1/0,s=-1/0;return[...t,...o].forEach(r=>{r.spells.forEach(n=>{e=Math.min(e,n.start),s=Math.max(s,n.end)})}),{start:e===1/0?0:e,end:s===-1/0?0:s}}function h(t,o){return t.some(e=>o>=e.start&&o<=e.end)}function x(t){return{id:t.id,label:t.label,...t.attributes}}function v(t){return{source:t.source,target:t.target,value:t.weight,...t.attributes}}function C(){return{nodes:[{id:"NYC",label:"New York City",region:"Northeast",population:8336817,latitude:40.7128,longitude:-74.006,economic_index:.95},{id:"LA",label:"Los Angeles",region:"West Coast",population:3971883,latitude:34.0522,longitude:-118.2437,economic_index:.88},{id:"CHI",label:"Chicago",region:"Midwest",population:2746388,latitude:41.8781,longitude:-87.6298,economic_index:.82},{id:"HOU",label:"Houston",region:"South",population:2320268,latitude:29.7604,longitude:-95.3698,economic_index:.78},{id:"PHX",label:"Phoenix",region:"Southwest",population:1608139,latitude:33.4484,longitude:-112.074,economic_index:.75}],edges:[{source:"NYC",target:"LA",value:12500,migration_type:"economic",distance_km:3944,economic_factor:.15},{source:"LA",target:"NYC",value:8900,migration_type:"economic",distance_km:3944,economic_factor:.12},{source:"CHI",target:"NYC",value:15200,migration_type:"career",distance_km:1266,economic_factor:.18},{source:"HOU",target:"DAL",value:18700,migration_type:"economic",distance_km:239,economic_factor:.08},{source:"PHX",target:"LA",value:11200,migration_type:"lifestyle",distance_km:373,economic_factor:.1}]}}export{C as c,k as g,I as l,E as p};
